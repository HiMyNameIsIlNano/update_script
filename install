#!/bin/sh

__read_property(){
	local input="$@"
	temp=`cat ${config_file} | sed 's/\"//g' | grep -w ${input} | cut -d ":" -f2`
	echo ${temp##*|}
}

default_dir=${HOME}/.local/scripts
config_file=${default_dir}/update.config

mkdir -p ${default_dir}

cp update ${default_dir}
chmod +x ${default_dir}/update_ports
cp update.config ${default_dir}

cp update_world ${default_dir}
chmod +x ${default_dir}/update_world
cp update_world.config ${default_dir}

cp update_pkg ${default_dir}
chmod +x ${default_dir}/update_pkg

cp update_wrapper ${default_dir}

# TODO: Check these two
# Add cronjob expression(s) one for update pkg and one for update world
update_ports_freq_in_days=$(__read_property update_ports_freq_in_days)
echo "* * */${update_ports_freq_in_days} * * ${HOME}/.local/scripts/update_wrapper -p >/dev/null 2>&1"  >> /var/cron/tabs

update_world_freq_in_days=$(__read_property update_world_freq_in_days)
echo "* * */${update_world_freq_in_days} * * ${HOME}/.local/scripts/update_wrapper -w >/dev/null 2>&1" >> /var/cron/tabs

